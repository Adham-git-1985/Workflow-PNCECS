{% extends "layout.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h3 class="mb-1">๐ ูุณุงุฑุงุช ุงูุนูู (Templates)</h3>
    <small class="text-muted">ุฅุฏุงุฑุฉ ููุงูุจ ูุณุงุฑุงุช ุงูููุงููุงุช</small>
  </div>

<div class="d-flex gap-2">
  <a class="btn btn-outline-success"
     href="{{ url_for('workflow.templates_export_excel', q=q or '') }}">
    โฌ๏ธ Excel
  </a>

  <a class="btn btn-primary"
     href="{{ url_for('workflow.templates_new') }}">
    โ ูุณุงุฑ ุฌุฏูุฏ
  </a>
</div>
</div>

<div class="card shadow-sm">
  <div class="card-body">

<form method="get" class="mb-3">
  <div class="input-group">
    <input class="form-control" type="text" name="q" value="{{ q or '' }}" placeholder="ุงุจุญุซ ุจุงุณู ุงููุณุงุฑโฆ">
    <button class="btn btn-outline-secondary" type="submit">ุจุญุซ</button>
    {% if q %}
      <a class="btn btn-outline-danger" href="{{ request.path }}">ูุณุญ</a>
    {% endif %}
  </div>
</form>



    {% if items %}
      <div class="table-responsive">
        <table class="table table-sm align-middle">
          <thead>
            <tr>
              <th>#</th>
              <th>ุงูุงุณู</th>
              <th>ูุดุท</th>
              <th>SLA ุงูุงูุชุฑุงุถู</th>
              <th class="text-end">ุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody>
            {% for t in items %}
            <tr>
              <td>{{ t.id }}</td>
              <td>{{ t.name }}</td>
              <td>
                {% if t.is_active %}
                  <span class="badge bg-success">ูุนู</span>
                {% else %}
                  <span class="badge bg-secondary">ูุง</span>
                {% endif %}
              </td>
              <td>{{ t.sla_days_default if t.sla_days_default is not none else '-' }}</td>
              <td class="text-end">

                <a class="btn btn-sm btn-outline-primary"
                   href="{{ url_for('workflow.templates_edit', template_id=t.id) }}">
                  โ๏ธ ุชุนุฏูู
                </a>

                <form method="post"
                      action="{{ url_for('workflow.templates_delete', template_id=t.id) }}"
                      class="d-inline"
                      onsubmit="return confirm('ุญุฐู ุงููุณุงุฑุ');">
                  <button class="btn btn-sm btn-outline-danger">
                    ๐๏ธ ุญุฐู
                  </button>
                </form>

              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-light text-center text-muted mb-0">
        ูุง ุชูุฌุฏ ูุณุงุฑุงุช ุญุงููุงู
      </div>
    {% endif %}

  </div>
</div>

{% endblock %}
