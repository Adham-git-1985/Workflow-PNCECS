{% extends "layout.html" %}
{% block title %}Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†{% endblock %}

{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h3 class="mb-1">ðŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
        <small class="text-muted">Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ£Ø¯ÙˆØ§Ø±Ù‡Ù…</small>
    </div>

    <a href="{{ url_for('users.create_user') }}"
       class="btn btn-primary">
        âž• Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
    </a>
</div>

<div class="card shadow-sm">
    <div class="card-body">

        {% if users %}
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th class="text-center">ØªØºÙŠÙŠØ± Ø§Ù„Ø¯ÙˆØ±</th>
                    </tr>
                </thead>
                <tbody>
                {% for user in users %}
                <tr>
                <td>{{ user["id"] }}</td>
                <td>
                    <strong>{{ user["email"] }}</strong>
                </td>
                <td>
                    <span class="badge bg-{{ 'success' if user["role"] == 'ADMIN' else 'secondary' }}">
                        {{ user["role"] }}
                    </span>
                </td>
                <td class="text-center">
                    <form method="POST"
                          action="{{ url_for('users.change_role', user_id=user["id"]) }}"
                          class="d-flex justify-content-center gap-2">

                        <select name="role"
                                class="form-select form-select-sm"
                                style="max-width:140px">
                            <option value="USER"
                                {% if user["role"] == "USER" %}selected{% endif %}>
                                User
                            </option>
                            <option value="ADMIN"
                                {% if user["role"] == "ADMIN" %}selected{% endif %}>
                                Admin
                            </option>
                        </select>

                        <button type="submit"
                                class="btn btn-sm btn-outline-primary">
                            ØªØ­Ø¯ÙŠØ«
                        </button>
                    </form>
                </td>
            </tr>

                {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="alert alert-light text-center text-muted">
            Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ù…Ø³Ø¬Ù„ÙˆÙ†
        </div>
        {% endif %}

    </div>
</div>

{% endblock %}
