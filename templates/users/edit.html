{% extends "layout.html" %}
{% block title %}ุชุนุฏูู ูุณุชุฎุฏู{% endblock %}

{% block content %}
<div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
  <div>
    <h3 class="mb-1">โ๏ธ ุชุนุฏูู ุงููุณุชุฎุฏู</h3>
    <div class="text-muted small">
      <span>{{ u.email }}</span>
      <span class="mx-2">โข</span>
      <span>ุงูุฏูุฑ:</span>
      <span class="badge text-bg-dark ms-1">{{ u.role }}</span>
    </div>
  </div>

  <div class="d-flex gap-2">
    {% if is_super_admin %}
      <a class="btn btn-outline-dark" href="{{ url_for('users.manage_user', user_id=u.id) }}">โ๏ธ ุฅุฏุงุฑุฉ ูุชูุฏูุฉ</a>
    {% endif %}
    <a class="btn btn-outline-secondary" href="{{ url_for('users.list_users') }}">โ ุฑุฌูุน</a>
  </div>
</div>

<div class="card shadow-sm">
  <form method="post" novalidate>

    <div class="card-body">
      <div class="row g-3">

        <!-- Basic Info -->
        <div class="col-lg-5">
          <div class="border rounded-3 p-3 h-100 bg-body-tertiary">
            <div class="d-flex align-items-center justify-content-between mb-3">
              <h5 class="mb-0">๐ค ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h5>
              <span class="badge text-bg-secondary">ูุนูููุงุช ุงููุณุชุฎุฏู</span>
            </div>

            <div class="row g-3">
              <div class="col-12">
                <label class="form-label">ุงูุงุณู</label>
                <input type="text" class="form-control" name="name" value="{{ u.name or '' }}" placeholder="ุงุณู ุงูููุธู (ุงุฎุชูุงุฑู)">
              </div>

              <div class="col-12">
                <label class="form-label">ุงููุณูู ุงููุธููู</label>
                <input type="text" class="form-control" name="job_title" value="{{ u.job_title or '' }}" placeholder="ุงููุณูู ุงููุธููู (ุงุฎุชูุงุฑู)">
              </div>

              <div class="col-12">
                <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                <input type="email" class="form-control" name="email" value="{{ u.email or '' }}" placeholder="example@pncecs.org">
                <div class="form-text">ุชุฃูุฏ ุฃู ุงูุจุฑูุฏ ูุฑูุฏ ูุบูุฑ ูุณุชุฎุฏู ูููุธู ุขุฎุฑ.</div>
              </div>

              <div class="col-12">
                <div class="d-flex align-items-center justify-content-between">
                  <label class="form-label mb-0">ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ (ุงุฎุชูุงุฑู)</label>
                  <span class="badge text-bg-warning">ุญุณุงุณ</span>
                </div>
                <input type="password" class="form-control" name="new_password" placeholder="ุงุชุฑูู ูุงุฑุบุงู ุจุฏูู ุชุบููุฑ">
                <div class="form-text">ุนูุฏ ุฅุฏุฎุงู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ุณูุชู ุชุบููุฑูุง ููุฑ ุงูุญูุธ.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Org Assignment -->
        <div class="col-lg-7">
          <div class="border rounded-3 p-3 h-100">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <h5 class="mb-0">๐ข ุงูุชุนููู ุนูู ุงููููู ุงูุชูุธููู</h5>
              <span class="badge text-bg-secondary">ุงุฎุชูุงุฑู</span>
            </div>

            <p class="text-muted small mb-3">
              ุงุฎุชุฑ <b>ุฃุฏูู ูุณุชูู</b> ุชุนุฑูู (ูุซู ุงูุดุนุจุฉ ุฃู ุงููุณู)ุ ูุณูุชู ุงุณุชูุชุงุฌ ุงููุณุชููุงุช ุงูุฃุนูู ุชููุงุฆูุงู ุนูุฏ ุงูุญูุธ ุฅู ุฃููู.
            </p>

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">ุงูุฅุฏุงุฑุฉ (Directorate)</label>
                <select class="form-select" name="directorate_id">
                  <option value="">โ ุจุฏูู โ</option>
                  {% for dr in directorates %}
                    <option value="{{ dr.id }}" {% if u.directorate_id == dr.id %}selected{% endif %}>
                      {{ dr.name_ar }}{% if dr.code %} ({{ dr.code }}){% endif %}
                    </option>
                  {% endfor %}
                </select>
                <div class="form-text">
                  ุชูุณุชุฎุฏู ูุฐู ุงููููุฉ ูููุงู <b>ุฑุฆูุณ ุฅุฏุงุฑุฉ / ูุงุฆุจ ุฑุฆูุณ ุฅุฏุงุฑุฉ</b> ูู ุฎุทูุงุช ุงููุณุงุฑ ูู ููุน <b>DIRECTORATE</b>.
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">ุงููุญุฏุฉ (Unit)</label>
                <select class="form-select" name="unit_id">
                  <option value="">โ ุจุฏูู โ</option>
                  {% for un in units %}
                    <option value="{{ un.id }}" {% if u.unit_id == un.id %}selected{% endif %}>
                      {{ un.name_ar }}{% if un.code %} ({{ un.code }}){% endif %}
                    </option>
                  {% endfor %}
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label">ุงูุฏุงุฆุฑุฉ (Department)</label>
                <select class="form-select" name="department_id">
                  <option value="">โ ุจุฏูู โ</option>
                  {% for d in departments %}
                    <option value="{{ d.id }}" {% if u.department_id == d.id %}selected{% endif %}>
                      {{ d.name_ar }}{% if d.code %} ({{ d.code }}){% endif %}
                    </option>
                  {% endfor %}
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label">ุงููุณู (Section)</label>
                <select class="form-select" name="section_id">
                  <option value="">โ ุจุฏูู โ</option>
                  {% for s in sections %}
                    <option value="{{ s.id }}" {% if u.section_id == s.id %}selected{% endif %}>
                      {{ s.name_ar }}{% if s.code %} ({{ s.code }}){% endif %}
                    </option>
                  {% endfor %}
                </select>
              </div>

              <div class="col-12">
                <label class="form-label">ุงูุดุนุจุฉ (Division)</label>
                <select class="form-select" name="division_id">
                  <option value="">โ ุจุฏูู โ</option>
                  {% for dv in divisions %}
                    <option value="{{ dv.id }}" {% if u.division_id == dv.id %}selected{% endif %}>
                      {{ dv.name_ar }}{% if dv.code %} ({{ dv.code }}){% endif %}
                    </option>
                  {% endfor %}
                </select>
                <div class="form-text">
                  ููุงุญุธุฉ: ุนูุฏ ุงุฎุชูุงุฑ <b>ุงูุดุนุจุฉ</b> ุฃู <b>ุงููุณู</b> ุณูุชู ุงุณุชูุชุงุฌ ุงููุณุชูู ุงูุฃุนูู (ุงูุฏุงุฆุฑุฉ/ุงูุฅุฏุงุฑุฉ/ุงููุญุฏุฉ) ุชููุงุฆูุงู ุนูุฏ ุงูุญูุธ.
                </div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

    <div class="card-footer bg-transparent d-flex flex-wrap gap-2 justify-content-between align-items-center">
      <div class="text-muted small">
        <span class="me-2">ID: {{ u.id }}</span>
        <span class="mx-2">โข</span>
        <span>ููููู ุญูุธ ุงูุชุบููุฑุงุช ุฃู ุงูุฅูุบุงุก.</span>
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-primary px-4">๐พ ุญูุธ ุงูุชุบููุฑุงุช</button>
        <a class="btn btn-outline-secondary" href="{{ url_for('users.list_users') }}">ุฅูุบุงุก</a>
      </div>
    </div>

  </form>
</div>
{% endblock %}
