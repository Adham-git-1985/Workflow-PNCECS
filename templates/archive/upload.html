{% extends "layout.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h3 class="mb-1">โฌ๏ธ ุฑูุน ููู</h3>
        <small class="text-muted">ุฅุถุงูุฉ ููู ุฌุฏูุฏ ุฅูู ุงูุฃุฑุดูู</small>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-body">

        <form method="POST" enctype="multipart/form-data">

            <div class="mb-3">
                <label class="form-label">๐ ุงูููู</label>
                <input type="file" name="file" class="form-control" required>
            </div>

            <div class="mb-4">
                <label class="form-label">๐ ุงููุตู</label>
                <textarea name="description"
                          class="form-control"
                          rows="3"
                          placeholder="ูุตู ุงุฎุชูุงุฑู ููููู"></textarea>
            </div>

            <!-- ุฅุฑุณุงู ููู Workflow -->
            <div class="form-check mt-3">
                <input class="form-check-input" type="checkbox" value="1" id="send_to_workflow" name="send_to_workflow">
                <label class="form-check-label" for="send_to_workflow">
                    ุฅุฑุณุงู ุงูููู ููุณุงุฑ ุนูู (Workflow)
                </label>
            </div>

            <!-- ุญููู ุงูู Workflow (ุชุธูุฑ ููุท ุนูุฏ ุงูุชูุนูู) -->
            <div class="mt-3" id="workflow_box" style="display:none;">

                <div class="mb-3">
                    <label class="form-label">๐งพ ุนููุงู ุงูุทูุจ</label>
                    <input type="text"
                           name="request_title"
                           class="form-control"
                           placeholder="ูุซุงู: ุทูุจ ุงุนุชูุงุฏ / ุทูุจ ููุงููุฉ / ุทูุจ ุชูููุน">
                    <small class="text-muted">ุงุฎุชูุงุฑู โ ุฅุฐุง ุชุฑูุชู ูุงุฑุบูุง ุณูุชู ูุถุน ุนููุงู ุงูุชุฑุงุถู.</small>
                </div>

                <div class="mb-3">
                    <label class="form-label">๐ ูุตู ุงูุทูุจ</label>
                    <textarea name="request_description"
                              class="form-control"
                              rows="3"
                              placeholder="ูุตู ูุฎุชุตุฑ ููุทูุจ (ุงุฎุชูุงุฑู)"></textarea>
                </div>

                <div class="mb-2" id="template_box">
                    <label class="form-label">ุงุฎุชุฑ ุงููุณุงุฑ (Template)</label>
                    <select class="form-select" name="template_id">
                        <option value="">-- ุงุฎุชุฑ --</option>
                        {% for t in templates %}
                            <option value="{{ t.id }}">{{ t.name }}</option>
                        {% endfor %}
                    </select>
                    <small class="text-muted">ููู: ูุงุฒู ุชุฎุชุงุฑ Template ูุจุฏุก ูุณุงุฑ ุงูุนูู.</small>
                </div>

            </div>

            <script>
                const cb = document.getElementById("send_to_workflow");
                const wfBox = document.getElementById("workflow_box");

                function toggleWorkflowBox() {
                    wfBox.style.display = cb.checked ? "block" : "none";
                }

                cb.addEventListener("change", toggleWorkflowBox);
                toggleWorkflowBox();
            </script>

            <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary">ุฑูุน ุงูููู</button>
            </div>

        </form>

    </div>
</div>

{% endblock %}
