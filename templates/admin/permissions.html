{% extends "layout.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h3 class="mb-1">๐ ุตูุงุญูุงุช ุงูุฃุฏูุงุฑ</h3>
        <small class="text-muted">
            ูุฐู ุงูุตูุญุฉ ูุฅุฏุงุฑุฉ ุตูุงุญูุงุช ุญุณุจ <strong>Role</strong> (ูุซู: ุนุฑุถ Dashboard / Escalations).
            <br>
            <span class="text-muted">ููุงุญุธุฉ: ุตูุญุฉ "Permissions" ุถูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ุฎุงุตุฉ ุจุตูุงุญูุงุช ุงููุณุชุฎุฏููู (CRUD) ูููุณุช ุตูุงุญูุงุช Roles.</span>
        </small>
    </div>
</div>

<div class="card shadow-sm mb-4">
    <div class="card-body">

        <form method="get" class="row g-3 mb-3">
            <div class="col-md-6">
                <label class="form-label">ุงุฎุชุฑ Role</label>
                <select name="role" class="form-select" onchange="this.form.submit()">
                    <option value="">-- ุงุฎุชุฑ --</option>
                    {% for r in role_codes %}
                        <option value="{{ r }}" {% if selected_role == r %}selected{% endif %}>{{ r }}</option>
                    {% endfor %}
                </select>
            </div>
        </form>

        {% if selected_role %}
        <form method="post" class="row g-3">
            <input type="hidden" name="role" value="{{ selected_role }}">

            <div class="col-12">
                <label class="form-label d-block mb-2">Permissions</label>

                <div class="row">
                    {% for p in permissions %}
                    <div class="col-md-4 mb-2">
                        <div class="form-check">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="permissions"
                                   value="{{ p }}"
                                   id="perm_{{ loop.index }}"
                                   {% if p in checked %}checked{% endif %}>
                            <label class="form-check-label" for="perm_{{ loop.index }}">
                                {{ p }}
                            </label>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="col-12">
                <button class="btn btn-primary px-4">
                    ๐พ ุญูุธ ุตูุงุญูุงุช ุงูุฏูุฑ
                </button>
            </div>
        </form>
        {% else %}
            <div class="alert alert-info mb-0">
                ุงุฎุชุฑ Role ุฃููุงู ูุนุฑุถ/ุชุนุฏูู ุงูุตูุงุญูุงุช.
            </div>
        {% endif %}

    </div>
</div>

{% endblock %}
