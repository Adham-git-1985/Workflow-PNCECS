{% extends "portal/layout.html" %}
{% block title %}{% if item %}تعديل سيارة{% else %}إضافة سيارة{% endif %}{% endblock %}
{% block content %}

{% include "portal/transport/_nav.html" %}


<div class="d-flex align-items-center justify-content-between mb-3">
  <h5 class="mb-0">
    <i class="bi bi-car-front"></i>
    {% if item %}تعديل سيارة{% else %}إضافة سيارة{% endif %}
  </h5>
  <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('portal.transport_vehicles') }}">رجوع</a>
</div>

<div class="bg-white rounded-3 shadow-sm p-3">
  <form method="post" class="row g-3">
    <div class="col-md-4">
      <label class="form-label">رقم اللوحة *</label>
      <input class="form-control" name="plate_no" value="{{ item.plate_no if item else '' }}" required>
    </div>
    <div class="col-md-8">
      <label class="form-label">الوصف</label>
      <input class="form-control" name="label" value="{{ item.label if item else '' }}" placeholder="مثال: سيارة رئيس اللجنة / سيارة اللوازم...">
    </div>

    <div class="col-md-4">
      <label class="form-label">نوع المركبة</label>
      <input class="form-control" name="vehicle_type" value="{{ item.vehicle_type if item else '' }}" placeholder="CAR / VAN / ...">
    </div>
    <div class="col-md-5">
      <label class="form-label">الموديل</label>
      <input class="form-control" name="model" value="{{ item.model if item else '' }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">السنة</label>
      <input class="form-control" name="year" value="{{ item.year if item and item.year else '' }}" type="number" min="1980" max="2100">
    </div>

    <div class="col-md-4">
      <label class="form-label">الحالة</label>
      <select class="form-select" name="status">
        {% set st = item.status if item else 'ACTIVE' %}
        <option value="ACTIVE" {% if st=='ACTIVE' %}selected{% endif %}>فعّالة</option>
        <option value="MAINTENANCE" {% if st=='MAINTENANCE' %}selected{% endif %}>صيانة</option>
        <option value="INACTIVE" {% if st=='INACTIVE' %}selected{% endif %}>غير فعّالة</option>
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">عداد (كم)</label>
      <input class="form-control" name="current_odometer" value="{{ item.current_odometer if item else '' }}" type="number" step="0.1" min="0">
    </div>
    <div class="col-md-4">
      <label class="form-label">ملاحظات</label>
      <input class="form-control" name="notes" value="{{ item.notes if item else '' }}">
    </div>

    <div class="col-12 d-flex gap-2">
      <button class="btn btn-primary" type="submit">حفظ</button>
      <a class="btn btn-outline-secondary" href="{{ url_for('portal.transport_vehicles') }}">إلغاء</a>
    </div>
  </form>
</div>

{% endblock %}
