{% extends 'layout.html' %}

{% block title %}دليل الموظف{% endblock %}

{% block extra_css %}
<style>
  .guide-wrap{max-width:1100px;margin:0 auto;direction:rtl;unicode-bidi:plaintext}
  .guide-hero{background:linear-gradient(180deg, rgba(13,110,253,.12), rgba(0,0,0,0));border:1px solid rgba(0,0,0,.07);border-radius:16px}
  .guide-hero h1{font-weight:800;letter-spacing:.2px}
  .guide-hero .meta{color:rgba(0,0,0,.6)}
  .guide-card{border:1px solid rgba(0,0,0,.07);border-radius:14px}
  .guide-card .card-header{background:rgba(0,0,0,.02);border-bottom:1px solid rgba(0,0,0,.06)}
  .guide-toc a{color:inherit;text-decoration:none}
  .guide-toc a:hover{text-decoration:underline}
  .guide-list li{margin-bottom:.35rem}
  .badge-soft{background:rgba(13,110,253,.10);color:#0d6efd;border:1px solid rgba(13,110,253,.18)}
  .ltr{direction:ltr;unicode-bidi:embed}
  @media print{
    .no-print{display:none !important}
    .admin-sidebar,.main-header{display:none !important}
    .admin-wrapper{padding:0 !important}
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
  <div class="guide-wrap">

    <div class="guide-hero p-4 p-md-5 mb-4">
      <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
        <div>
          <h1 class="mb-2">دليل الموظف</h1>
          <div class="meta">شرح مبسّط لاستخدام النظام: الدخول، التنقل، الإجازات، أذون الحركة، الإشعارات، وأفضل الممارسات.</div>
          <div class="meta mt-1">هذا الدليل موجّه لكل موظف داخل اللجنة الوطنية الفلسطينية للتربية والثقافة والعلوم.</div>
        </div>
        <div class="d-flex gap-2 no-print">
          <a class="btn btn-outline-primary" href="{{ url_for('static', filename='docs/employee_guide_ar.docx') }}">
            <i class="bi bi-download"></i>
            تنزيل نسخة وورد
          </a>
          <button class="btn btn-primary" onclick="window.print()">
            <i class="bi bi-printer"></i>
            طباعة
          </button>
        </div>
      </div>

      <div class="guide-toc mt-4">
        <div class="row g-2">
          <div class="col-12 col-md-4"><a href="#start" class="d-block p-2 bg-white rounded-3 border">البدء: الدخول والتنقل</a></div>
          <div class="col-12 col-md-4"><a href="#leaves" class="d-block p-2 bg-white rounded-3 border">الإجازات: تقديم ومتابعة</a></div>
          <div class="col-12 col-md-4"><a href="#transport" class="d-block p-2 bg-white rounded-3 border">الحركة: إذن حركة ومهام السائق</a></div>
        </div>
      </div>
    </div>

    <div id="start" class="card guide-card mb-3">
      <div class="card-header"><strong>١) الدخول للنظام والتنقل الأساسي</strong></div>
      <div class="card-body">
        <ol class="guide-list">
          <li>سجّل دخولك باستخدام البريد الإلكتروني وكلمة المرور.</li>
          <li>من القائمة الجانبية ستجد أقسام النظام الأساسية (الطلبات، الإشعارات، البوابة الإدارية…).</li>
          <li>صفحة <strong>ملفي الشخصي</strong> تتيح لك تحديث بياناتك وتعديل الصورة الشخصية عند توفر الصلاحية.</li>
        </ol>
        <div class="alert alert-info mb-0">
          <strong>معلومة:</strong> إذا لم تظهر لك خدمة معينة (مثل الحركة أو التقارير)، فهذا يعني أنك تحتاج صلاحية. اطلبها من مسؤول النظام.
        </div>
      </div>
    </div>

    <div class="card guide-card mb-3">
      <div class="card-header"><strong>٢) الإشعارات والمتابعة</strong></div>
      <div class="card-body">
        <ul class="guide-list mb-0">
          <li>افتح <strong>الإشعارات</strong> لعرض القرارات (اعتماد/رفض) والتنبيهات المهمة.</li>
          <li>قد تظهر شارة (Badge) بجانب الإشعارات عند وجود عناصر غير مقروءة.</li>
          <li>عند فتح إشعار، تأكد من مراجعة التفاصيل قبل اتخاذ أي إجراء.</li>
        </ul>
      </div>
    </div>

    <div id="leaves" class="card guide-card mb-3">
      <div class="card-header"><strong>٣) الإجازات: تقديم ومتابعة وإلغاء</strong></div>
      <div class="card-body">
        <ul class="guide-list">
          <li>من القائمة الجانبية: <span class="badge badge-soft">البوابة الإدارية</span> ← <span class="badge badge-soft">الموارد البشرية</span> ← <span class="badge badge-soft">إجازاتي</span>.</li>
          <li>لتقديم طلب: اضغط <strong>طلب إجازة جديد</strong> ثم أكمل البيانات وأرسل الطلب.</li>
          <li>ستجد زر <strong>دليل الإجازات</strong> بجانب زر (طلب إجازة جديد) لتتأكد من السياسات (الخصم، الإلغاء، المرفقات…).</li>
        </ul>
        <div class="alert alert-warning mb-0">
          <strong>تنبيه ذكي:</strong> إذا كان نوع الإجازة يتطلب تقريرًا (مثل المرضية)، ارفع المرفق قبل الإرسال حتى لا يرفض النظام الطلب.
        </div>
      </div>
    </div>

    <div id="transport" class="card guide-card mb-3">
      <div class="card-header"><strong>٤) الحركة: إذن حركة، الرحلات، ومهام السائقين</strong></div>
      <div class="card-body">
        <p class="mb-2">خدمة الحركة تُستخدم لتنظيم تحركات السيارات والسائقين، واعتماد الأذون، وتسجيل الرحلات والمسافات.</p>
        <ol class="guide-list">
          <li>إذا كانت لديك صلاحية، ستجد: <span class="badge badge-soft">البوابة الإدارية</span> ← <span class="badge badge-soft">الحركة والنقل</span>.</li>
          <li>اذهب إلى <strong>أذون الحركة</strong> ثم اضغط <strong>إذن جديد</strong> لإرسال طلب إذن حركة للاعتماد.</li>
          <li>بعد الاعتماد، قد يقوم مسؤول الحركة/الموارد البشرية بتسجيل <strong>الرحلة</strong> والمسافة الفعلية.</li>
          <li>إذا كنت سائقًا: راجع صفحة <strong>مهام السائقين</strong> وتابع حالة مهامك (قيد التنفيذ/تم).</li>
        </ol>
        <div class="d-flex gap-2 no-print">
          <a class="btn btn-outline-secondary" href="{{ url_for('users.help_transport_guide') }}" target="_blank">
            <i class="bi bi-book"></i>
            فتح دليل الحركة بالتفصيل
          </a>
        </div>
      </div>
    </div>

    <div class="card guide-card mb-4">
      <div class="card-header"><strong>٥) أفضل الممارسات (لتجنب الأخطاء)</strong></div>
      <div class="card-body">
        <ul class="guide-list mb-0">
          <li>تأكد من صحة التواريخ والأوقات قبل الإرسال.</li>
          <li>اكتب الغرض بشكل واضح ومختصر لتسهيل الاعتماد.</li>
          <li>لا تشارك بيانات الدخول، وتجنب رفع ملفات تحتوي معلومات حساسة إلا عند الضرورة.</li>
          <li>إذا حدثت مشكلة في الصلاحيات، راجع مسؤول النظام لتمكين الخدمة المطلوبة.</li>
        </ul>
      </div>
    </div>

  </div>
</div>
{% endblock %}
