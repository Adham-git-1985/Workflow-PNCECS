{% extends "layout.html" %}
{% block content %}

<h3 class="mb-4">ğŸ§­ System Activity Timeline</h3>

<ul class="timeline">

{% for log in logs %}
<li class="timeline-item">

    <!-- Ø§Ù„ÙˆÙ‚Øª -->
    <div class="timeline-time">
        {{ log.created_at.strftime("%Y-%m-%d") }}<br>
        <small>{{ log.created_at.strftime("%H:%M") }}</small>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
    <div class="timeline-content">

        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <div class="timeline-header">
            <span class="badge badge-action">
                {{ log.action }}
            </span>
        </div>

        <!-- Ø§Ù„Ø±Ø³Ø§Ù„Ø© -->
        <p class="mt-2">
            {{ log.note or "-" }}
        </p>

        <!-- ØªÙØ§ØµÙŠÙ„ -->
        <div class="timeline-meta">

            {% if log.user %}
                ğŸ‘¤
                <strong>{{ log.user.email }}</strong>
            {% else %}
                ğŸ¤– System
            {% endif %}

            {% if log.target_type %}
                &nbsp;|&nbsp;

                {% if log.target_type == "WorkflowRequest" %}
                    ğŸ“„
                    <a href="{{ url_for('review_request', request_id=log.target_id) }}">
                        Request #{{ log.target_id }}
                    </a>

                {% elif log.target_type == "ArchivedFile" %}
                    ğŸ—‚ï¸
                    <a href="{{ url_for('archive.my_files') }}">
                        Archived File #{{ log.target_id }}
                    </a>

                {% elif log.target_type == "User" %}
                    ğŸ‘¤
                    User #{{ log.target_id }}
                {% endif %}
            {% endif %}
        </div>

    </div>
</li>
{% endfor %}

</ul>

{% endblock %}
